<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trading App UI</title>
  <link rel="stylesheet" href="style.css" />

    <style>
    /* ================= APP ================= */
    .app {
    height: 100vh;
    display: flex;
    flex-direction: column;
    }

    /* ================= TOP BAR ================= */
    .top-bar {
    position: sticky;
    top: 0;
    z-index: 10;
    height: 56px;
    padding: 0 14px;
    background: #0c1324;
    display: flex;
    justify-content: space-between;
    align-items: center;
    }

    .balance-box {
    display: flex;
    align-items: center;
    gap: 8px;
    }

    .balance {
    font-size: 20px;
    font-weight: 600;
    }

    .status {
    font-size: 13px;
    padding: 3px 8px;
    border-radius: 12px;
    background: #002b16;
    color: #16c784;
    }

    .top-actions {
    display: flex;
    gap: 14px;
    }


    .top-actions img {
    width: 22px;
    height: 22px;
    opacity: 0.6;
    cursor: pointer;
    }

    .top-actions img:hover{
        opacity: 1;
    }    

    .search-icon {
    width: 22px;
    height: 22px;
    opacity: 0.85;
    cursor: pointer;
    }

    /* ================= PAGES ================= */
    .pages {
    flex: 1;
    position: relative;
    }

    .page {
    position: absolute;
    inset: 0;
    padding-bottom: 80px; /* space for bottom nav */
    overflow-y: auto;
    display: none;
    }

    .page.active {
    display: block;
    }

    /* ================= BOTTOM NAV ================= */
    .bottom-nav {
    height: 64px;
    background: #0c1324;
    display: flex;
    justify-content: space-around;
    align-items: center;
    border-top: 1px solid rgba(255,255,255,0.06);
    }

    .nav-btn {
    background: none;
    border: none;
    color: #8f95b2;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    font-size: 11px;
    cursor: pointer;
    }

    .nav-btn:hover{
    color: #ffffff;
    }

    .nav-btn img {
    width: 22px;
    height: 22px;
    }

    .nav-btn.active {
    color: #ffffff;
    }
        
    </style>
    
    <style>
        * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: system-ui, -apple-system;
        scrollbar-color: #1a2340 transparent; /* Firefox */
        scrollbar-width: thin;
        }

        body {
        background: #0c1324;
        color: #fff;
        }

        /* ===== UI ===== */
        .top-bar {
        display: flex;
        justify-content: space-between;
        padding: 14px;
        }

        .badge {
        background: #1fd18b;
        padding: 2px 6px;
        border-radius: 6px;
        font-size: 12px;
        }

        .promo {
        margin: 20px;
        display: flex;flex-direction: column;
        }

        .offers {display: flex; gap: 16px; overflow-x: auto; overflow-y: hidden; padding: 10px 20px;
        /* smooth scrolling */
        scroll-behavior: smooth;

        /* optional: hide scrollbar (cross-browser) */
        scrollbar-width: none; /* Firefox */
        }


        .offers::-webkit-scrollbar {
        display: none; /* Chrome, Safari */
        }

        .offer-card { min-width: 300px; width: 300px; height: 110px; 
            background: #1e1e2f; border-radius: 14px; flex-shrink: 0; /* prevents shrinking */
            background-size: cover;        /* fit card perfectly */
            background-position: center;   /* center image */
            background-repeat: no-repeat; cursor: pointer;
            padding: 20px;display: flex;flex-direction: column;gap: 13px;
        }

        .offer-card h3{font-size: 16px;}
        .offer-card p {font-size: 13px;width: 80%;}

        .offer-card:nth-child(1) {
        background-image: url("images/global-deposit-bonus-v1.png");
        }

        .offer-card:nth-child(2) {
        background-image: url("images/global-promo-account-ul-v1.png");
        }

        .offer-card:nth-child(3) {
        background-image: url("images/global-promo-raf-v1.png");
        }

        .offer-card:nth-child(4) {
        background-image: url("images/global-promo-competition-trading-v1.png");
        }

        .offer-card:nth-child(5) {
        background-image: url("images/brand-promo-15y-cashback-v2.png");
        }

        
        .markets {
        padding: 12px 0px;display: flex;flex-direction: column;gap: 15px;
        }
        .market-header{display: flex;width: 100%;align-items: center;justify-content: space-between;padding: 0px 20px;}
        .market-categories{display: flex;width: 100%;align-items: center;overflow-x: auto;gap: 10px;padding: 0px 20px;white-space: nowrap;}
        .market-category-pill{text-align: center; color: #ffffffaf;border-radius: 50px;padding: 8px 16px;background-color: #1a2340;cursor: pointer;font-weight: bold;}
        .market-categories .active {background-color: white;color: #0c1324;}
        .market-item {display: flex;justify-content: space-between;border-bottom: 1px solid #1a2340;cursor: pointer;transition: .2s;padding: 14px 20px;}

        .market-item:hover {
        background: #121c3a;
        }



        .market-item .left {
        display: flex;
        gap: 10px;
        }

        .market-item img {
        width: 35px;
        height: 35px;
        }

        .symbol {
        font-weight: 600;
        }

        .desc {
        font-size: 16px;
        color: #9aa4c7;
        }

        .price {
        font-weight: 600;font-size: 18px;
        }

        .positive {
        color: #1fd18b;
        }

        .negative {
        color: #ff5c5c;
        }

        .right{display: flex; flex-direction: column; align-items: end;}

        /* ===== OVERLAY & PANEL ===== */
        #panelOverlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, .45);
        opacity: 0;
        pointer-events: none;
        transition: .3s;
        z-index: 99;
        }

        #panelOverlay.active {
        opacity: 1;
        pointer-events: auto;
        }

        #slidePanel {
        position: fixed;
        bottom: -100%;
        left: 0;
        width: 100%;
        height: 95%;
        background: #0f1730;
        border-radius: 16px 16px 0 0;
        transition: .35s;
        padding: 10px;
        z-index: 100;
        }

        #slidePanel.active {
        bottom: 0;
        }

        .drag-bar {
        width: 40px;
        height: 4px;
        background: #444;
        margin: 8px auto;
        border-radius: 4px;
        }

        /*control the canvas*/
        .canvas-disabled{display: none;}
        .canvas-enable{display: block}

        .trade-header {
        padding: 10px;
        }

        canvas {
        width: 100%;
        height: 400px;
        cursor: crosshair;
        display: block;
        }

        /* ===== TOOLTIP ===== */
        #priceTooltip {
        position: absolute;
        background: #000;
        padding: 6px 8px;
        font-size: 12px;
        border-radius: 6px;
        pointer-events: none;
        display: none;
        }

        /* ===== AXES ===== */
        .y-axis {
        position: absolute;
        right: 0;
        top: 0;
        bottom: 0;
        width: 46px;
        font-size: 18px;
        color: #9aa4c7;
        }

        .y-axis div {
        position: absolute;
        right: 4px;
        transform: translateY(50%);
        }

        .x-axis {
        display: flex;
        justify-content: space-between;
        font-size: 11px;
        color: #9aa4c7;
        padding: 6px 8px;
        }

        /* ===== BUY / SELL ===== */
        .trade-actions {
        display: flex;
        gap: 10px;
        padding: 10px;
        }

        .sell,
        .buy {
        flex: 1;
        padding: 14px;
        border-radius: 12px;
        text-align: center;
        font-weight: 600;
        }

        .sell {
        background: #ff5c5c;
        }

        .buy {
        background: #1fd18b;
        }

        .trade-actions span {
        display: block;
        font-size: 12px;
        font-weight: 400;
        }
    </style>

</head>
<body>

<div class="app">

  <!-- ================= FLOATING TOP BAR ================= -->
  <header class="top-bar">
    <div class="balance-box">
      <span class="balance">$0.00</span>
      <span class="status">Real</span>
    </div>

    <div class="top-actions">
      <img src="images/notification-icon.png" alt="Notifications" id="notificationButton">
      <img src="images/wallet-icon.png" alt="History" id="walletButton">
      <img src="images/profile-icon.png" alt="Profile" id="profileButton">
    </div>
  </header>

  <!-- ================= PAGES ================= -->
  <main class="pages">

    <!-- PAGE 1 -->
    <section class="page active" id="page-markets">
        <div style="width: 35%;height: 8px;border-radius: 50px;background-color: #ffffff28;margin-left: 20px;">
            <div style="width: 30%;height: 8px;border-radius: 50px;background-color: #01b93f;"></div>
        </div>
        <div class="promo">
            <h3>Finish setting up your account üéÅ</h3>
            <p style="color: #ffffff88;">Complete all steps to unlock <strong style="color: orange;">50% deposit bonus</strong></p>
            <p style="background-color: white;color: #0c1324;padding: 8px 12px;border-radius: 8px; width: fit-content;font-weight: 600; cursor: pointer;margin-top:18px">Complete</p>
        </div>

        <div class="offers">
            <div class="offer-card">
                <h3>Get a 50% Deposit Bonus</h3>
                <p>Claim up to $500 in extra trading capital</p>
            </div>
            <div class="offer-card">
                <h3>Ultra Low Account</h3>
                <p>Benefit from some of the lowest trading costs on the market</p>                
            </div>
            <div class="offer-card">
                <h3>Refer a Friend</h3>    
                <p>Earn $80 for every successful referral</p>                
            </div>
            <div class="offer-card">
                <h3>XM Competitions</h3>
                <p>Put your skills to the test to win big withdrawable cash prizes</p>                
            </div>
            <div class="offer-card">
                <h3>Get a 50% Deposit Bonus</h3>
                <p>Claim up to $500 in extra trading capital</p>                
            </div>        
        </div>

        <div class="markets">
            <div class="market-header">
              <h3 style="font-size: 22px;">Markets</h3>
              <img src="images/search-icon.png" alt="" class="search-icon" id="searchButton">
            </div>
            <div class="market-categories">
              <p class="market-category-pill active">Popular</p>
              <p class="market-category-pill">Forex</p>
              <p class="market-category-pill">Stock CFDs</p>
              <p class="market-category-pill">Turbo Stocks</p>
              <p class="market-category-pill">Stock 5</p>
            </div>

            <div id="marketList" class="market-list"></div>
        </div>

        <div id="panelOverlay"></div>

        <div id="slidePanel">

          <div id="chartCanvas">
            <div class="drag-bar"></div>
            <div class="trade-header"> <span id="tradeSymbol"></span> </div>
            <canvas id="chart"></canvas>
            <div class="y-axis" id="yAxis"></div>
            <div class="x-axis" id="xAxis"></div>

            <div class="trade-actions">
              <div class="sell"> SELL <span id="sellPrice">--</span>  </div>
              <div class="buy">   BUY <span id="buyPrice">--</span>   </div>
            </div>
          </div>

          <div id="searchCanvas">  
            search canvas
          </div>

          <div id="notificationCanvas">
            notifcation canvas
          </div>

          <div id="walletCanvas">
            wallet canvas
          </div>

          <div id="profileCanvas">
            profile canvas
          </div>

        </div>

    </section>

    <!-- PAGE 2 -->
    <section class="page" id="page-trades">
      <!-- üîΩ PASTE PAGE 2 CONTENT HERE üîΩ -->
      <h2>Trades</h2>
    </section>

    <!-- PAGE 3 -->
    <section class="page" id="page-explore">
      <!-- üîΩ PASTE PAGE 3 CONTENT HERE üîΩ -->
      <h2>Explore</h2>
    </section>

    <!-- PAGE 4 -->
    <section class="page" id="page-more">
      <!-- üîΩ PASTE PAGE 4 CONTENT HERE üîΩ -->
      <h2>More</h2>
    </section>

  </main>

  <!-- ================= BOTTOM NAV ================= -->
  <nav class="bottom-nav">

        <button class="nav-btn active" data-page="page-markets">
        <img 
            src="images/trade-icon.png"
            data-active="images/trade-icon-active.png"
            data-inactive="images/trade-icon.png"
        >
        <span>Markets</span>
        </button>

        <button class="nav-btn" data-page="page-trades">
        <img 
            src="images/transaction-icon.png"
            data-active="images/transaction-icon-active.png"
            data-inactive="images/transaction-icon.png"
        >
        <span>Trades</span>
        </button>

        <button class="nav-btn" data-page="page-explore">
        <img 
            src="images/explore-icon.png"
            data-active="images/explore-icon-active.png"
            data-inactive="images/explore-icon.png"
        >
        <span>Explore</span>
        </button>

        <button class="nav-btn" data-page="page-more">
        <img 
            src="images/more-icon.png"
            data-active="images/more-icon-active.png"
            data-inactive="images/more-icon.png"
        >
        <span>More</span>
        </button>

  </nav>

</div>

<script>
const navButtons = document.querySelectorAll(".nav-btn");
const pages = document.querySelectorAll(".page");

function updateNavIcons() {
  navButtons.forEach(btn => {
    const img = btn.querySelector("img");
    img.src = btn.classList.contains("active")
      ? img.dataset.active
      : img.dataset.inactive;
  });
}

// initial load
updateNavIcons();

navButtons.forEach(btn => {
  btn.addEventListener("click", () => {

    navButtons.forEach(b => b.classList.remove("active"));
    pages.forEach(p => p.classList.remove("active"));

    btn.classList.add("active");
    document.getElementById(btn.dataset.page).classList.add("active");

    updateNavIcons();
  });
});
</script>


<script>
  const markets = [
    { symbol: "BTCUSD", desc: "Bitcoin vs US Dollar", type: "crypto", id: "bitcoin", img: "images/btcusd.svg"},
    { symbol: "ETHUSD", desc: "Ethereum vs US Dollar", type: "crypto", id: "ethereum", img: "images/ethusd.svg"},
    { symbol: "USDJPY", desc: "US Dollar vs Japanese Yen", type: "forex", base: "USD", quote: "JPY", img: "images/usdjpy.svg"},
    { symbol: "USDJPY", desc: "US Dollar vs Japanese Yen", type: "forex", base: "USD", quote: "JPY", img: "images/usdjpy.svg"},
    { symbol: "USDJPY", desc: "US Dollar vs Japanese Yen", type: "forex", base: "USD", quote: "JPY", img: "images/usdjpy.svg"},
    { symbol: "USDJPY", desc: "US Dollar vs Japanese Yen", type: "forex", base: "USD", quote: "JPY", img: "images/usdjpy.svg"},
    { symbol: "USDJPY", desc: "US Dollar vs Japanese Yen", type: "forex", base: "USD", quote: "JPY", img: "images/usdjpy.svg"},
    { symbol: "USDJPY", desc: "US Dollar vs Japanese Yen", type: "forex", base: "USD", quote: "JPY", img: "images/usdjpy.svg"},
    { symbol: "USDJPY", desc: "US Dollar vs Japanese Yen", type: "forex", base: "USD", quote: "JPY", img: "images/usdjpy.svg"},
    { symbol: "USDJPY", desc: "US Dollar vs Japanese Yen", type: "forex", base: "USD", quote: "JPY", img: "images/usdjpy.svg"},
    { symbol: "USDJPY", desc: "US Dollar vs Japanese Yen", type: "forex", base: "USD", quote: "JPY", img: "images/usdjpy.svg"}, 
    { symbol: "USDJPY", desc: "US Dollar vs Japanese Yen", type: "forex", base: "USD", quote: "JPY", img: "images/usdjpy.svg"},
    { symbol: "USDJPY", desc: "US Dollar vs Japanese Yen", type: "forex", base: "USD", quote: "JPY", img: "images/usdjpy.svg"},
    { symbol: "USDJPY", desc: "US Dollar vs Japanese Yen", type: "forex", base: "USD", quote: "JPY", img: "images/usdjpy.svg"},
    { symbol: "USDJPY", desc: "US Dollar vs Japanese Yen", type: "forex", base: "USD", quote: "JPY", img: "images/usdjpy.svg"},
    { symbol: "USDJPY", desc: "US Dollar vs Japanese Yen", type: "forex", base: "USD", quote: "JPY", img: "images/usdjpy.svg"},
    { symbol: "USDJPY", desc: "US Dollar vs Japanese Yen", type: "forex", base: "USD", quote: "JPY", img: "images/usdjpy.svg"},
    { symbol: "USDJPY", desc: "US Dollar vs Japanese Yen", type: "forex", base: "USD", quote: "JPY", img: "images/usdjpy.svg"},    
  ];

  const list = document.getElementById("marketList");
  const panel = document.getElementById("slidePanel");
  const overlay = document.getElementById("panelOverlay");
  const tradeSymbol = document.getElementById("tradeSymbol");

  /*Define the constants for the various canvas that are on the slide up panel*/
  const chart = document.getElementById("chartCanvas");
  const search = document.getElementById("searchCanvas");
  const notification = document.getElementById("notificationCanvas");
  const wallet = document.getElementById("walletCanvas");
  const profile = document.getElementById("profileCanvas");
  /*-----------------------------------------------------------------------------*/
  const notificationBtn = document.getElementById("notificationButton");
  const walletBtn = document.getElementById("walletButton");
  const profileBtn = document.getElementById("profileButton");
  const searchBtn = document.getElementById("searchButton");



  const canvas = document.getElementById("chart");
  const ctx = canvas.getContext("2d");
  const xAxis = document.getElementById("xAxis");
  const sellPrice = document.getElementById("sellPrice");
  const buyPrice = document.getElementById("buyPrice");

  let chartData = [], chartTimes = [];
  let crossX = null, crossY = null;

  // ===== LOCAL DATA STORAGE =====
  let storedData = [];      // current data stored
  let updatedData = [];     // changes to apply

  // ===== CHART PADDING =====
  let padding = 40;
  let topPadding = 20;
  let bottomPadding = 20;
  let leftPadding = 0;
  let chartWidth = 0;
  let chartHeight = 0;

  // ===== INITIALIZE CANVAS =====
  function resizeCanvas() {
    canvas.width = canvas.offsetWidth;
    canvas.height = 400;
    chartWidth = canvas.width - padding * 2;
    chartHeight = canvas.height - topPadding - bottomPadding;
    drawChart();
  }
  resizeCanvas();
  window.addEventListener("resize", resizeCanvas);

  // ===== BUILD MARKET LIST =====
  markets.forEach(m => {
    const row = document.createElement("div");
    row.className = "market-item";
    row.dataset.symbol = m.symbol;
    row.innerHTML = `
  <div class="left">
    <img src=${m.img}>
    <div>
      <div class="symbol">${m.symbol}</div>
      <div class="desc">${m.desc}</div>
    </div>
  </div>
  <div class="right">
    <div class="price">--</div>
    <div class="change">--</div>
  </div>`;
    row.onclick = () => selectMarket(m, row);
    list.appendChild(row);
  });

  // ===== LIVE PRICES =====
  async function updatePrices() {
    const cryptoIds = markets.filter(m => m.type === "crypto").map(m => m.id).join(",");
    const crypto = await fetch(
      `https://api.coingecko.com/api/v3/simple/price?ids=${cryptoIds}&vs_currencies=usd&include_24hr_change=true`
    ).then(r => r.json());

    markets.forEach(m => {
      let price = 0, change = 0;
      if (m.type === "crypto") {
        price = crypto[m.id].usd;
        change = crypto[m.id].usd_24h_change;
      }

      const row = document.querySelector(`[data-symbol="${m.symbol}"]`);
      row.querySelector(".price").textContent = price.toLocaleString();
      row.querySelector(".change").textContent =
        `${change >= 0 ? "+" : ""}${change.toFixed(2)}%`;
      row.querySelector(".change").className =
        `change ${change >= 0 ? "positive" : "negative"}`;

      // ===== STORE UPDATES =====
      const existing = updatedData.find(u => u.symbol === m.symbol);
      if (existing) {
        existing.price = price;
      } else {
        updatedData.push({ symbol: m.symbol, price });
      }
    });
  }
  setInterval(updatePrices, 2000); // faster updates for demo
  updatePrices();

  // ===== PANEL CONTROL =====
  overlay.onclick = () => {
    panel.classList.remove("active");
    overlay.classList.remove("active");
  };

  // ===== LOAD CHART =====
  async function loadChart(m) {
    chartData = []; chartTimes = [];
    const res = await fetch(
      `https://api.coingecko.com/api/v3/coins/${m.id}/market_chart?vs_currency=usd&days=1`
    );
    const json = await res.json();
    json.prices.forEach(p => {
      chartTimes.push(new Date(p[0]));
      chartData.push(p[1]);
    });

    // Store initial data locally
    storedData = chartData.slice();

    drawChart();
    updateTradePrices();
  }

  // ===== DRAW CHART =====
  function drawChart() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    if (!chartData.length) return;

    const min = Math.min(...chartData);
    const max = Math.max(...chartData);
    const lastPrice = chartData.at(-1);

    // ===== GRID LINES =====
    ctx.strokeStyle = "rgba(255,255,255,0.1)";
    ctx.lineWidth = 1;

    // Horizontal lines (10)
    for (let i = 0; i <= 9; i++) {
      const y = topPadding + i / 9 * chartHeight;
      ctx.beginPath();
      ctx.moveTo(padding, y);
      ctx.lineTo(canvas.width - padding, y);
      ctx.stroke();
    }

    // Vertical lines (3)
    for (let i = 0; i <= 2; i++) {
      const x = padding + i / 2 * chartWidth;
      ctx.beginPath();
      ctx.moveTo(x, topPadding);
      ctx.lineTo(x, canvas.height - bottomPadding);
      ctx.stroke();
    }

    // ===== Y AXIS LABELS =====
    ctx.fillStyle = "#9aa4c7";
    ctx.font = "15px system-ui";
    ctx.textAlign = "right";
    ctx.textBaseline = "middle";

    for (let i = 0; i <= 9; i++) {
      const y = topPadding + i / 9 * chartHeight;
      const val = (min + (max - min) * (9 - i) / 9).toFixed(2);
      ctx.fillText(val, canvas.width - 6, y);
    }





    

    // ===== GRAPH LINE =====
  // ===== GRAPH LINE + GRADIENT =====
  ctx.beginPath();
  chartData.forEach((p, i) => {
    const x = padding + i / (chartData.length - 1) * chartWidth;
    const y = topPadding + chartHeight - (p - min) / (max - min) * chartHeight;
    i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
  });

  // ---- CREATE GRADIENT ----
  const gradient = ctx.createLinearGradient(0, topPadding, 0, topPadding + chartHeight);
  gradient.addColorStop(0, "rgba(31, 209, 138, 0.16)");
  gradient.addColorStop(0.6, "rgba(31, 209, 138, 0.04)");
  gradient.addColorStop(1, "rgba(31, 209, 139, 0)");

  // ---- FILL AREA UNDER LINE ----
  ctx.lineTo(padding + chartWidth, topPadding + chartHeight);
  ctx.lineTo(padding, topPadding + chartHeight);
  ctx.closePath();

  ctx.fillStyle = gradient;
  ctx.fill();

  // ---- STROKE LINE ON TOP ----
  ctx.beginPath();
  chartData.forEach((p, i) => {
    const x = padding + i / (chartData.length - 1) * chartWidth;
    const y = topPadding + chartHeight - (p - min) / (max - min) * chartHeight;
    i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
  });

  ctx.strokeStyle = "#1fd18b";
  ctx.lineWidth = 2;
  ctx.stroke();

  
    // ===== LAST PRICE LINE =====
    const lastY = topPadding + chartHeight - (lastPrice - min) / (max - min) * chartHeight;
    const labelWidth = 60;
    const labelHeight = 18;

    // Horizontal line
    ctx.strokeStyle = "#ffffff";
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(padding, lastY);
    ctx.lineTo(canvas.width - padding - labelWidth, lastY);
    ctx.stroke();

    // Price label box
    ctx.fillStyle = "#ffffff";
    ctx.fillRect(canvas.width - padding - labelWidth, lastY - labelHeight/2, labelWidth, labelHeight);

    // Price text inside
    ctx.fillStyle = "#000000";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    ctx.fillText(lastPrice.toFixed(2), canvas.width - padding - labelWidth/2, lastY);

    // ===== CROSSHAIR =====
    if (crossX !== null) {
      ctx.strokeStyle = "rgba(255,255,255,.3)";
      ctx.beginPath();
      const crossYClamped = Math.min(Math.max(crossY, topPadding), canvas.height - bottomPadding);
      ctx.moveTo(crossX, topPadding);
      ctx.lineTo(crossX, canvas.height - bottomPadding);
      ctx.moveTo(padding, crossYClamped);
      ctx.lineTo(canvas.width - padding, crossYClamped);
      ctx.stroke();
    }

    // ===== X AXIS LABELS =====
    xAxis.innerHTML = `
      <span>${chartTimes[0]?.toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" })}</span>
      <span>${chartTimes.at(-1)?.toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" })}</span>
    `;
  }

  // ===== CROSSHAIR EVENTS =====
  canvas.onmousemove = e => {
    const r = canvas.getBoundingClientRect();
    crossX = e.clientX - r.left;
    crossY = e.clientY - r.top;
    drawChart();
  };
  canvas.onmouseleave = () => {
    crossX = null; crossY = null;
    drawChart();
  };

  // ===== BUY / SELL =====
  function updateTradePrices() {
    const last = chartData.at(-1);
    sellPrice.textContent = last.toFixed(2);
    buyPrice.textContent = (last + 20).toFixed(2);
  }

  // ===== SELECT MARKET =====
  async function selectMarket(m, row) {
    document.querySelectorAll(".market-item").forEach(r => r.classList.remove("active"));
    row.classList.add("active");
    tradeSymbol.textContent = m.symbol;
    panel.classList.add("active");
    overlay.classList.add("active");
    chartCanvas.classList.remove("canvas-disabled");
    searchCanvas.classList.add("canvas-disabled");
    notificationCanvas.classList.add("canvas-disabled");
    walletCanvas.classList.add("canvas-disabled");
    profileCanvas.classList.add("canvas-disabled");
    await loadChart(m);
  }


  //NOTIFICATION CANVAS ====
  notificationBtn.addEventListener("click", () => {
    panel.classList.add("active");
    overlay.classList.add("active");
    chartCanvas.classList.add("canvas-disabled");
    searchCanvas.classList.add("canvas-disabled");
    notificationCanvas.classList.remove("canvas-disabled");
    walletCanvas.classList.add("canvas-disabled");
    profileCanvas.classList.add("canvas-disabled");
  });

  //WALLET CANVAS ====
  walletBtn.addEventListener("click", () => {
    panel.classList.add("active");
    overlay.classList.add("active");
    chartCanvas.classList.add("canvas-disabled");
    searchCanvas.classList.add("canvas-disabled");
    notificationCanvas.classList.add("canvas-disabled");
    walletCanvas.classList.remove("canvas-disabled");
    profileCanvas.classList.add("canvas-disabled");
  });  

  //PROFILE CANVAS ====
  profileBtn.addEventListener("click", () => {
    panel.classList.add("active");
    overlay.classList.add("active");
    chartCanvas.classList.add("canvas-disabled");
    searchCanvas.classList.add("canvas-disabled");
    notificationCanvas.classList.add("canvas-disabled");
    walletCanvas.classList.add("canvas-disabled");
    profileCanvas.classList.remove("canvas-disabled");
  });

  //SEARCH CANVAS ====
  searchBtn.addEventListener("click", () => {
    panel.classList.add("active");
    overlay.classList.add("active");
    chartCanvas.classList.add("canvas-disabled");
    searchCanvas.classList.remove("canvas-disabled");
    notificationCanvas.classList.add("canvas-disabled");
    walletCanvas.classList.add("canvas-disabled");
    profileCanvas.classList.add("canvas-disabled");
  });  




</script>

</body>
</html>
